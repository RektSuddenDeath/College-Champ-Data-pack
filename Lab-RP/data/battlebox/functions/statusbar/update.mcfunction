# Time Bar
scoreboard players remove timeleft_tick bb_game 1

execute store result bossbar bb_match1 value run scoreboard players get timeleft_tick bb_game
execute store result bossbar bb_match2 value run scoreboard players get timeleft_tick bb_game
execute store result bossbar bb_match3 value run scoreboard players get timeleft_tick bb_game
execute store result bossbar bb_match4 value run scoreboard players get timeleft_tick bb_game

execute if score timeleft_tick bb_game matches 801..1200 run bossbar set bb_match1 color green
execute if score timeleft_tick bb_game matches 801..1200 run bossbar set bb_match2 color green
execute if score timeleft_tick bb_game matches 801..1200 run bossbar set bb_match3 color green
execute if score timeleft_tick bb_game matches 801..1200 run bossbar set bb_match4 color green

execute if score timeleft_tick bb_game matches 401..800 run bossbar set bb_match1 color yellow
execute if score timeleft_tick bb_game matches 401..800 run bossbar set bb_match2 color yellow
execute if score timeleft_tick bb_game matches 401..800 run bossbar set bb_match3 color yellow
execute if score timeleft_tick bb_game matches 401..800 run bossbar set bb_match4 color yellow

execute if score timeleft_tick bb_game matches ..400 run bossbar set bb_match1 color red
execute if score timeleft_tick bb_game matches ..400 run bossbar set bb_match2 color red
execute if score timeleft_tick bb_game matches ..400 run bossbar set bb_match3 color red
execute if score timeleft_tick bb_game matches ..400 run bossbar set bb_match4 color red

# Players Bar
bossbar set bb_players_red name ["",{"selector":"@p[team=red,scores={bb_statusbar_pid=1},tag=bb_alive]"},{"selector":"@p[team=red,scores={bb_statusbar_pid=1},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=red,scores={bb_statusbar_pid=2},tag=bb_alive]"},{"selector":"@p[team=red,scores={bb_statusbar_pid=2},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=red,scores={bb_statusbar_pid=3},tag=bb_alive]"},{"selector":"@p[team=red,scores={bb_statusbar_pid=3},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=red,scores={bb_statusbar_pid=4},tag=bb_alive]"},{"selector":"@p[team=red,scores={bb_statusbar_pid=4},tag=!bb_alive]","color": "dark_gray","strikethrough": true}]
bossbar set bb_players_blue name ["",{"selector":"@p[team=blue,scores={bb_statusbar_pid=1},tag=bb_alive]"},{"selector":"@p[team=blue,scores={bb_statusbar_pid=1},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=blue,scores={bb_statusbar_pid=2},tag=bb_alive]"},{"selector":"@p[team=blue,scores={bb_statusbar_pid=2},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=blue,scores={bb_statusbar_pid=3},tag=bb_alive]"},{"selector":"@p[team=blue,scores={bb_statusbar_pid=3},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=blue,scores={bb_statusbar_pid=4},tag=bb_alive]"},{"selector":"@p[team=blue,scores={bb_statusbar_pid=4},tag=!bb_alive]","color": "dark_gray","strikethrough": true}]
bossbar set bb_players_green name ["",{"selector":"@p[team=green,scores={bb_statusbar_pid=1},tag=bb_alive]"},{"selector":"@p[team=green,scores={bb_statusbar_pid=1},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=green,scores={bb_statusbar_pid=2},tag=bb_alive]"},{"selector":"@p[team=green,scores={bb_statusbar_pid=2},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=green,scores={bb_statusbar_pid=3},tag=bb_alive]"},{"selector":"@p[team=green,scores={bb_statusbar_pid=3},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=green,scores={bb_statusbar_pid=4},tag=bb_alive]"},{"selector":"@p[team=green,scores={bb_statusbar_pid=4},tag=!bb_alive]","color": "dark_gray","strikethrough": true}]
bossbar set bb_players_yellow name ["",{"selector":"@p[team=yellow,scores={bb_statusbar_pid=1},tag=bb_alive]"},{"selector":"@p[team=yellow,scores={bb_statusbar_pid=1},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=yellow,scores={bb_statusbar_pid=2},tag=bb_alive]"},{"selector":"@p[team=yellow,scores={bb_statusbar_pid=2},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=yellow,scores={bb_statusbar_pid=3},tag=bb_alive]"},{"selector":"@p[team=yellow,scores={bb_statusbar_pid=3},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=yellow,scores={bb_statusbar_pid=4},tag=bb_alive]"},{"selector":"@p[team=yellow,scores={bb_statusbar_pid=4},tag=!bb_alive]","color": "dark_gray","strikethrough": true}]
bossbar set bb_players_cyan name ["",{"selector":"@p[team=cyan,scores={bb_statusbar_pid=1},tag=bb_alive]"},{"selector":"@p[team=cyan,scores={bb_statusbar_pid=1},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=cyan,scores={bb_statusbar_pid=2},tag=bb_alive]"},{"selector":"@p[team=cyan,scores={bb_statusbar_pid=2},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=cyan,scores={bb_statusbar_pid=3},tag=bb_alive]"},{"selector":"@p[team=cyan,scores={bb_statusbar_pid=3},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=cyan,scores={bb_statusbar_pid=4},tag=bb_alive]"},{"selector":"@p[team=cyan,scores={bb_statusbar_pid=4},tag=!bb_alive]","color": "dark_gray","strikethrough": true}]
bossbar set bb_players_pink name ["",{"selector":"@p[team=pink,scores={bb_statusbar_pid=1},tag=bb_alive]"},{"selector":"@p[team=pink,scores={bb_statusbar_pid=1},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=pink,scores={bb_statusbar_pid=2},tag=bb_alive]"},{"selector":"@p[team=pink,scores={bb_statusbar_pid=2},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=pink,scores={bb_statusbar_pid=3},tag=bb_alive]"},{"selector":"@p[team=pink,scores={bb_statusbar_pid=3},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=pink,scores={bb_statusbar_pid=4},tag=bb_alive]"},{"selector":"@p[team=pink,scores={bb_statusbar_pid=4},tag=!bb_alive]","color": "dark_gray","strikethrough": true}]
bossbar set bb_players_orange name ["",{"selector":"@p[team=orange,scores={bb_statusbar_pid=1},tag=bb_alive]"},{"selector":"@p[team=orange,scores={bb_statusbar_pid=1},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=orange,scores={bb_statusbar_pid=2},tag=bb_alive]"},{"selector":"@p[team=orange,scores={bb_statusbar_pid=2},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=orange,scores={bb_statusbar_pid=3},tag=bb_alive]"},{"selector":"@p[team=orange,scores={bb_statusbar_pid=3},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=orange,scores={bb_statusbar_pid=4},tag=bb_alive]"},{"selector":"@p[team=orange,scores={bb_statusbar_pid=4},tag=!bb_alive]","color": "dark_gray","strikethrough": true}]
bossbar set bb_players_purple name ["",{"selector":"@p[team=purple,scores={bb_statusbar_pid=1},tag=bb_alive]"},{"selector":"@p[team=purple,scores={bb_statusbar_pid=1},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=purple,scores={bb_statusbar_pid=2},tag=bb_alive]"},{"selector":"@p[team=purple,scores={bb_statusbar_pid=2},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=purple,scores={bb_statusbar_pid=3},tag=bb_alive]"},{"selector":"@p[team=purple,scores={bb_statusbar_pid=3},tag=!bb_alive]","color": "dark_gray","strikethrough": true},"  ",{"selector":"@p[team=purple,scores={bb_statusbar_pid=4},tag=bb_alive]"},{"selector":"@p[team=purple,scores={bb_statusbar_pid=4},tag=!bb_alive]","color": "dark_gray","strikethrough": true}]

execute if score RoundActive tourney_stats matches 1 run schedule function battlebox:statusbar/update 1t